function hex_md5(r){return rstr2hex(rstr_md5(str2rstr_utf8(r)))}function hex_hmac_md5(r,d){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(r),str2rstr_utf8(d)))}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc").toLowerCase()}function rstr_md5(r){return binl2rstr(binl_md5(rstr2binl(r),8*r.length))}function rstr_hmac_md5(r,d){var n=rstr2binl(r);n.length>16&&(n=binl_md5(n,8*r.length));for(var e=Array(16),t=Array(16),m=0;m<16;m++)e[m]=909522486^n[m],t[m]=1549556828^n[m];var _=binl_md5(e.concat(rstr2binl(d)),512+8*d.length);return binl2rstr(binl_md5(t.concat(_),640))}function rstr2hex(r){try{}catch(d){hexcase=0}for(var n,e=hexcase?"0123456789ABCDEF":"0123456789abcdef",t="",m=0;m<r.length;m++)n=r.charCodeAt(m),t+=e.charAt(n>>>4&15)+e.charAt(15&n);return t}function str2rstr_utf8(r){for(var d,n,e="",t=-1;++t<r.length;)d=r.charCodeAt(t),n=t+1<r.length?r.charCodeAt(t+1):0,55296<=d&&d<=56319&&56320<=n&&n<=57343&&(d=65536+((1023&d)<<10)+(1023&n),t++),d<=127?e+=String.fromCharCode(d):d<=2047?e+=String.fromCharCode(192|d>>>6&31,128|63&d):d<=65535?e+=String.fromCharCode(224|d>>>12&15,128|d>>>6&63,128|63&d):d<=2097151&&(e+=String.fromCharCode(240|d>>>18&7,128|d>>>12&63,128|d>>>6&63,128|63&d));return e}function rstr2binl(r){for(var d=Array(r.length>>2),n=0;n<d.length;n++)d[n]=0;for(var n=0;n<8*r.length;n+=8)d[n>>5]|=(255&r.charCodeAt(n/8))<<n%32;return d}function binl2rstr(r){for(var d="",n=0;n<32*r.length;n+=8)d+=String.fromCharCode(r[n>>5]>>>n%32&255);return d}function binl_md5(r,d){r[d>>5]|=128<<d%32,r[(d+64>>>9<<4)+14]=d;for(var n=1732584193,e=-271733879,t=-1732584194,m=271733878,_=0;_<r.length;_+=16){var i=n,f=e,o=t,h=m;n=md5_ff(n,e,t,m,r[_+0],7,-680876936),m=md5_ff(m,n,e,t,r[_+1],12,-389564586),t=md5_ff(t,m,n,e,r[_+2],17,606105819),e=md5_ff(e,t,m,n,r[_+3],22,-1044525330),n=md5_ff(n,e,t,m,r[_+4],7,-176418897),m=md5_ff(m,n,e,t,r[_+5],12,1200080426),t=md5_ff(t,m,n,e,r[_+6],17,-1473231341),e=md5_ff(e,t,m,n,r[_+7],22,-45705983),n=md5_ff(n,e,t,m,r[_+8],7,1770035416),m=md5_ff(m,n,e,t,r[_+9],12,-1958414417),t=md5_ff(t,m,n,e,r[_+10],17,-42063),e=md5_ff(e,t,m,n,r[_+11],22,-1990404162),n=md5_ff(n,e,t,m,r[_+12],7,1804603682),m=md5_ff(m,n,e,t,r[_+13],12,-40341101),t=md5_ff(t,m,n,e,r[_+14],17,-1502002290),e=md5_ff(e,t,m,n,r[_+15],22,1236535329),n=md5_gg(n,e,t,m,r[_+1],5,-165796510),m=md5_gg(m,n,e,t,r[_+6],9,-1069501632),t=md5_gg(t,m,n,e,r[_+11],14,643717713),e=md5_gg(e,t,m,n,r[_+0],20,-373897302),n=md5_gg(n,e,t,m,r[_+5],5,-701558691),m=md5_gg(m,n,e,t,r[_+10],9,38016083),t=md5_gg(t,m,n,e,r[_+15],14,-660478335),e=md5_gg(e,t,m,n,r[_+4],20,-405537848),n=md5_gg(n,e,t,m,r[_+9],5,568446438),m=md5_gg(m,n,e,t,r[_+14],9,-1019803690),t=md5_gg(t,m,n,e,r[_+3],14,-187363961),e=md5_gg(e,t,m,n,r[_+8],20,1163531501),n=md5_gg(n,e,t,m,r[_+13],5,-1444681467),m=md5_gg(m,n,e,t,r[_+2],9,-51403784),t=md5_gg(t,m,n,e,r[_+7],14,1735328473),e=md5_gg(e,t,m,n,r[_+12],20,-1926607734),n=md5_hh(n,e,t,m,r[_+5],4,-378558),m=md5_hh(m,n,e,t,r[_+8],11,-2022574463),t=md5_hh(t,m,n,e,r[_+11],16,1839030562),e=md5_hh(e,t,m,n,r[_+14],23,-35309556),n=md5_hh(n,e,t,m,r[_+1],4,-1530992060),m=md5_hh(m,n,e,t,r[_+4],11,1272893353),t=md5_hh(t,m,n,e,r[_+7],16,-155497632),e=md5_hh(e,t,m,n,r[_+10],23,-1094730640),n=md5_hh(n,e,t,m,r[_+13],4,681279174),m=md5_hh(m,n,e,t,r[_+0],11,-358537222),t=md5_hh(t,m,n,e,r[_+3],16,-722521979),e=md5_hh(e,t,m,n,r[_+6],23,76029189),n=md5_hh(n,e,t,m,r[_+9],4,-640364487),m=md5_hh(m,n,e,t,r[_+12],11,-421815835),t=md5_hh(t,m,n,e,r[_+15],16,530742520),e=md5_hh(e,t,m,n,r[_+2],23,-995338651),n=md5_ii(n,e,t,m,r[_+0],6,-198630844),m=md5_ii(m,n,e,t,r[_+7],10,1126891415),t=md5_ii(t,m,n,e,r[_+14],15,-1416354905),e=md5_ii(e,t,m,n,r[_+5],21,-57434055),n=md5_ii(n,e,t,m,r[_+12],6,1700485571),m=md5_ii(m,n,e,t,r[_+3],10,-1894986606),t=md5_ii(t,m,n,e,r[_+10],15,-1051523),e=md5_ii(e,t,m,n,r[_+1],21,-2054922799),n=md5_ii(n,e,t,m,r[_+8],6,1873313359),m=md5_ii(m,n,e,t,r[_+15],10,-30611744),t=md5_ii(t,m,n,e,r[_+6],15,-1560198380),e=md5_ii(e,t,m,n,r[_+13],21,1309151649),n=md5_ii(n,e,t,m,r[_+4],6,-145523070),m=md5_ii(m,n,e,t,r[_+11],10,-1120210379),t=md5_ii(t,m,n,e,r[_+2],15,718787259),e=md5_ii(e,t,m,n,r[_+9],21,-343485551),n=safe_add(n,i),e=safe_add(e,f),t=safe_add(t,o),m=safe_add(m,h)}return Array(n,e,t,m)}function md5_cmn(r,d,n,e,t,m){return safe_add(bit_rol(safe_add(safe_add(d,r),safe_add(e,m)),t),n)}function md5_ff(r,d,n,e,t,m,_){return md5_cmn(d&n|~d&e,r,d,t,m,_)}function md5_gg(r,d,n,e,t,m,_){return md5_cmn(d&e|n&~e,r,d,t,m,_)}function md5_hh(r,d,n,e,t,m,_){return md5_cmn(d^n^e,r,d,t,m,_)}function md5_ii(r,d,n,e,t,m,_){return md5_cmn(n^(d|~e),r,d,t,m,_)}function safe_add(r,d){var n=(65535&r)+(65535&d),e=(r>>16)+(d>>16)+(n>>16);return e<<16|65535&n}function bit_rol(r,d){return r<<d|r>>>32-d}!function(r){r.extend(r.fn,{cookie:function(d,n,e){var t,m,_,i;return arguments.length>1&&"[object Object]"!==String(n)?(e=r.extend({},e),null!==n&&void 0!==n||(e.expires=-1),"number"==typeof e.expires&&(t=24*e.expires*60*60*1e3,m=e.expires=new Date,m.setTime(m.getTime()+t)),n=String(n),document.cookie=[encodeURIComponent(d),"=",e.raw?n:encodeURIComponent(n),e.expires?"; expires="+e.expires.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+e.domain:"",e.secure?"; secure":""].join("")):(e=n||{},i=e.raw?function(r){return r}:decodeURIComponent,(_=new RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)").exec(document.cookie))?i(_[1]):null)}})}(Zepto);var hexcase=0;
!function(e,n){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return n(e)}):n(e,!0)}(this,function(e,n){function i(n,i,t){e.WeixinJSBridge?WeixinJSBridge.invoke(n,o(i),function(e){c(n,e,t)}):u(n,t)}function t(n,i,t){e.WeixinJSBridge?WeixinJSBridge.on(n,function(e){t&&t.trigger&&t.trigger(e),c(n,e,i)}):t?u(n,t):u(n,i)}function o(e){return e=e||{},e.appId=P.appId,e.verifyAppId=P.appId,e.verifySignType="sha1",e.verifyTimestamp=P.timestamp+"",e.verifyNonceStr=P.nonceStr,e.verifySignature=P.signature,e}function r(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,"package":e["package"],paySign:e.paySign,signType:e.signType||"SHA1"}}function a(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}function c(e,n,i){"openEnterpriseChat"==e&&(n.errCode=n.err_code),delete n.err_code,delete n.err_desc,delete n.err_detail;var t=n.errMsg;t||(t=n.err_msg,delete n.err_msg,t=s(e,t),n.errMsg=t),i=i||{},i._complete&&(i._complete(n),delete i._complete),t=n.errMsg||"",P.debug&&!i.isInnerInvoke&&alert(JSON.stringify(n));var o=t.indexOf(":"),r=t.substring(o+1);switch(r){case"ok":i.success&&i.success(n);break;case"cancel":i.cancel&&i.cancel(n);break;default:i.fail&&i.fail(n)}i.complete&&i.complete(n)}function s(e,n){var i=e,t=h[i];t&&(i=t);var o="ok";if(n){var r=n.indexOf(":");o=n.substring(r+1),"confirm"==o&&(o="ok"),"failed"==o&&(o="fail"),-1!=o.indexOf("failed_")&&(o=o.substring(7)),-1!=o.indexOf("fail_")&&(o=o.substring(5)),o=o.replace(/_/g," "),o=o.toLowerCase(),("access denied"==o||"no permission to execute"==o)&&(o="permission denied"),"config"==i&&"function not exist"==o&&(o="ok"),""==o&&(o="fail")}return n=i+":"+o}function d(e){if(e){for(var n=0,i=e.length;i>n;++n){var t=e[n],o=g[t];o&&(e[n]=o)}return e}}function u(e,n){if(!(!P.debug||n&&n.isInnerInvoke)){var i=h[e];i&&(e=i),n&&n._complete&&delete n._complete,console.log('"'+e+'",',n||"")}}function l(e){if(!(_||w||P.debug||"6.0.2">M||V.systemType<0)){var n=new Image;V.appId=P.appId,V.initTime=C.initEndTime-C.initStartTime,V.preVerifyTime=C.preVerifyEndTime-C.preVerifyStartTime,N.getNetworkType({isInnerInvoke:!0,success:function(e){V.networkType=e.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+V.version+"&o="+V.isPreVerifyOk+"&s="+V.systemType+"&c="+V.clientVersion+"&a="+V.appId+"&n="+V.networkType+"&i="+V.initTime+"&p="+V.preVerifyTime+"&u="+V.url;n.src=i}})}}function p(){return(new Date).getTime()}function f(n){T&&(e.WeixinJSBridge?n():S.addEventListener&&S.addEventListener("WeixinJSBridgeReady",n,!1))}function m(){N.invoke||(N.invoke=function(n,i,t){e.WeixinJSBridge&&WeixinJSBridge.invoke(n,o(i),t)},N.on=function(n,i){e.WeixinJSBridge&&WeixinJSBridge.on(n,i)})}if(!e.jWeixin){var g={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},h=function(){var e={};for(var n in g)e[g[n]]=n;return e}(),S=e.document,v=S.title,I=navigator.userAgent.toLowerCase(),y=navigator.platform.toLowerCase(),_=!(!y.match("mac")&&!y.match("win")),w=-1!=I.indexOf("wxdebugger"),T=-1!=I.indexOf("micromessenger"),k=-1!=I.indexOf("android"),x=-1!=I.indexOf("iphone")||-1!=I.indexOf("ipad"),M=function(){var e=I.match(/micromessenger\/(\d+\.\d+\.\d+)/)||I.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),C={initStartTime:p(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},V={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:x?1:k?2:-1,clientVersion:M,url:encodeURIComponent(location.href)},P={},A={_completes:[]},L={state:0,data:{}};f(function(){C.initEndTime=p()});var B=!1,O=[],N={config:function(e){P=e,u("config",e);var n=P.check!==!1;f(function(){if(n)i(g.config,{verifyJsApiList:d(P.jsApiList)},function(){A._complete=function(e){C.preVerifyEndTime=p(),L.state=1,L.data=e},A.success=function(e){V.isPreVerifyOk=0},A.fail=function(e){A._fail?A._fail(e):L.state=-1};var e=A._completes;return e.push(function(){l()}),A.complete=function(n){for(var i=0,t=e.length;t>i;++i)e[i]();A._completes=[]},A}()),C.preVerifyStartTime=p();else{L.state=1;for(var e=A._completes,t=0,o=e.length;o>t;++t)e[t]();A._completes=[]}}),P.beta&&m()},ready:function(e){0!=L.state?e():(A._completes.push(e),!T&&P.debug&&e())},error:function(e){"6.0.2">M||(-1==L.state?e(L.data):A._fail=e)},checkJsApi:function(e){var n=function(e){var n=e.checkResult;for(var i in n){var t=h[i];t&&(n[t]=n[i],delete n[i])}return e};i("checkJsApi",{jsApiList:d(e.jsApiList)},function(){return e._complete=function(e){if(k){var i=e.checkResult;i&&(e.checkResult=JSON.parse(i))}e=n(e)},e}())},onMenuShareTimeline:function(e){t(g.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:e.title||v,desc:e.title||v,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){t(g.onMenuShareAppMessage,{complete:function(){i("sendAppMessage",{title:e.title||v,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){t(g.onMenuShareQQ,{complete:function(){i("shareQQ",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){t(g.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){t(g.onMenuShareQZone,{complete:function(){i("shareQZone",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){i("startRecord",{},e)},stopRecord:function(e){i("stopRecord",{},e)},onVoiceRecordEnd:function(e){t("onVoiceRecordEnd",e)},playVoice:function(e){i("playVoice",{localId:e.localId},e)},pauseVoice:function(e){i("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){i("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){t("onVoicePlayEnd",e)},uploadVoice:function(e){i("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){i("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){i("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){i("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},function(){return e._complete=function(e){if(k){var n=e.localIds;n&&(e.localIds=JSON.parse(n))}},e}())},getLocation:function(e){},previewImage:function(e){i(g.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){i("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){i("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){B===!1?(B=!0,i("getLocalImgData",{localId:e.localId},function(){return e._complete=function(e){if(B=!1,O.length>0){var n=O.shift();wx.getLocalImgData(n)}},e}())):O.push(e)},getNetworkType:function(e){var n=function(e){var n=e.errMsg;e.errMsg="getNetworkType:ok";var i=e.subtype;if(delete e.subtype,i)e.networkType=i;else{var t=n.indexOf(":"),o=n.substring(t+1);switch(o){case"wifi":case"edge":case"wwan":e.networkType=o;break;default:e.errMsg="getNetworkType:fail"}}return e};i("getNetworkType",{},function(){return e._complete=function(e){e=n(e)},e}())},openLocation:function(e){i("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},i(g.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){i("hideOptionMenu",{},e)},showOptionMenu:function(e){i("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},i("closeWindow",{},e)},hideMenuItems:function(e){i("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){i("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){i("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){i("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},i("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){if(x){var n=e.resultStr;if(n){var i=JSON.parse(n);e.resultStr=i&&i.scan_code&&i.scan_code.scan_result}}},e}())},openAddress:function(e){i(g.openAddress,{},function(){return e._complete=function(e){e=a(e)},e}())},openProductSpecificView:function(e){i(g.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){for(var n=e.cardList,t=[],o=0,r=n.length;r>o;++o){var a=n[o],c={card_id:a.cardId,card_ext:a.cardExt};t.push(c)}i(g.addCard,{card_list:t},function(){return e._complete=function(e){var n=e.card_list;if(n){n=JSON.parse(n);for(var i=0,t=n.length;t>i;++i){var o=n[i];o.cardId=o.card_id,o.cardExt=o.card_ext,o.isSuccess=!!o.is_succ,delete o.card_id,delete o.card_ext,delete o.is_succ}e.cardList=n,delete e.card_list}},e}())},chooseCard:function(e){i("chooseCard",{app_id:P.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){for(var n=e.cardList,t=[],o=0,r=n.length;r>o;++o){var a=n[o],c={card_id:a.cardId,code:a.code};t.push(c)}i(g.openCard,{card_list:t},e)},consumeAndShareCard:function(e){i(g.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)},chooseWXPay:function(e){i(g.chooseWXPay,r(e),e)},openEnterpriseRedPacket:function(e){i(g.openEnterpriseRedPacket,r(e),e)},startSearchBeacons:function(e){i(g.startSearchBeacons,{ticket:e.ticket},e)},stopSearchBeacons:function(e){i(g.stopSearchBeacons,{},e)},onSearchBeacons:function(e){t(g.onSearchBeacons,e)},openEnterpriseChat:function(e){i("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)}},E=1,b={};return S.addEventListener("error",function(e){if(!k){var n=e.target,i=n.tagName,t=n.src;if("IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i){var o=-1!=t.indexOf("wxlocalresource://");if(o){e.preventDefault(),e.stopPropagation();var r=n["wx-id"];if(r||(r=E++,n["wx-id"]=r),b[r])return;b[r]=!0,wx.ready(function(){wx.getLocalImgData({localId:t,success:function(e){n.src=e.localData}})})}}}},!0),S.addEventListener("load",function(e){if(!k){var n=e.target,i=n.tagName;if(n.src,"IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i){var t=n["wx-id"];t&&(b[t]=!1)}}},!0),n&&(e.wx=e.jWeixin=N),N}});